<!DOCTYPE html>
<html lang="sv">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>FÃ¶rsÃ¤kringskassan AIåŠ©æ‰‹</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<link rel="stylesheet" href="/css/custom.css" />
		<script>
			tailwind.config = {
				theme: {
					extend: {
						colors: {
							primary: {
								50: '#f0f9ff',
								100: '#e0f2fe',
								200: '#bae6fd',
								300: '#7dd3fc',
								400: '#38bdf8',
								500: '#0ea5e9',
								600: '#0284c7',
								700: '#0369a1',
								800: '#075985',
								900: '#0c4a6e',
							},
							success: {
								50: '#f0fdf4',
								100: '#dcfce7',
								500: '#22c55e',
								800: '#166534',
							},
							warning: {
								50: '#fffbeb',
								100: '#fef3c7',
								500: '#f59e0b',
								800: '#92400e',
							},
						},
					},
				},
			};
		</script>
		<style>
			.loading-spinner {
				border: 2px solid #f3f3f3;
				border-top: 2px solid #0284c7;
				border-radius: 50%;
				width: 20px;
				height: 20px;
				animation: spin 1s linear infinite;
			}

			@keyframes spin {
				0% {
					transform: rotate(0deg);
				}
				100% {
					transform: rotate(360deg);
				}
			}

			.fade-in {
				animation: fadeIn 0.3s ease-in;
			}

			@keyframes fadeIn {
				from {
					opacity: 0;
					transform: translateY(-10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}
		</style>
	</head>
	<body class="bg-gray-50 min-h-screen">
		<!-- å¤´éƒ¨ -->
		<header class="bg-white shadow-sm border-b border-gray-200">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
				<h1 class="text-3xl font-bold text-gray-900">
					FÃ¶rsÃ¤kringskassan AIåŠ©æ‰‹
				</h1>
				<p class="text-gray-600 mt-1">
					å…³äºfÃ¶rÃ¤ldrarpenningå’Œbarnçš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿ - æ–¹æ¡ˆ1: OpenAI Agent SDK
				</p>
			</div>
		</header>

		<!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
		<main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
			<!-- çŠ¶æ€ä¿¡æ¯æ  -->
			<div class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
				<div class="flex items-center gap-2">
					<span class="text-blue-800 font-semibold">ğŸ’° ä½¿ç”¨æ¨¡å‹:</span>
					<span class="text-blue-700">gpt-4o-mini (OpenAIæœ€ä¾¿å®œçš„æ¨¡å‹)</span>
				</div>
				<div class="flex items-center gap-2 mt-2">
					<span class="text-blue-800 font-semibold">Vector Store:</span>
					<span class="text-blue-700" id="vectorStoreStatus">æœªä¸Šä¼ æ–‡ä»¶</span>
				</div>
			</div>

			<!-- æ–¹æ¡ˆ1: OpenAI -->
			<div class="bg-white rounded-xl shadow-lg p-6 border border-gray-200">
				<div class="flex items-center justify-between mb-6">
					<h2 class="text-2xl font-bold text-gray-900">
						OpenAI Responses API + å†…ç½®ç½‘ç»œæœç´¢
					</h2>
					<span
						class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-warning-100 text-warning-800"
					>
						âš ï¸ ä»˜è´¹æœåŠ¡ (gpt-4o-mini)
					</span>
				</div>

				<!-- PDFä¸Šä¼  -->
				<div class="mb-6">
					<label class="block text-sm font-medium text-gray-700 mb-2">
						1. ä¸Šä¼ PDFæ–‡ä»¶åˆ°OpenAI Vector Store
					</label>
					<div class="flex items-center gap-4">
						<input type="file" id="pdfUpload" accept=".pdf" class="hidden" />
						<label
							for="pdfUpload"
							class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors duration-200 cursor-pointer"
						>
							é€‰æ‹©PDFæ–‡ä»¶
						</label>
						<span id="fileName" class="text-sm text-gray-600"></span>
						<button
							id="uploadBtn"
							class="hidden bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200"
						>
							å¼€å§‹ä¸Šä¼ 
						</button>
					</div>
					<div id="uploadProgress" class="hidden mt-2">
						<div class="flex items-center gap-2">
							<div class="loading-spinner"></div>
							<span class="text-sm text-gray-600">æ­£åœ¨ä¸Šä¼ ...</span>
						</div>
					</div>
					<div id="uploadSuccess" class="hidden mt-2">
						<p class="text-sm text-success-800 bg-success-50 p-2 rounded">
							âœ… æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼
						</p>
					</div>
					<div id="uploadError" class="hidden mt-2">
						<p class="text-sm text-red-800 bg-red-50 p-2 rounded"></p>
					</div>
				</div>

				<!-- è¾“å…¥æ¡† -->
				<div class="mb-4">
					<label class="block text-sm font-medium text-gray-700 mb-2">
						2. è¾“å…¥æ‚¨çš„é—®é¢˜
					</label>
					<textarea
						id="queryInput"
						rows="4"
						placeholder="ä¾‹å¦‚ï¼šHur mÃ¥nga dagar med fÃ¶rÃ¤ldrapenning kan man fÃ¥?"
						class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent outline-none transition-all duration-200"
						disabled
					></textarea>
					<p class="text-xs text-gray-500 mt-1">è¯·å…ˆä¸Šä¼ PDFæ–‡ä»¶åå†æé—®</p>
				</div>

				<!-- æäº¤æŒ‰é’® -->
				<button
					id="submitBtn"
					class="bg-primary-600 hover:bg-primary-700 text-white font-semibold py-2 px-6 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed w-full sm:w-auto"
					disabled
				>
					æäº¤é—®é¢˜å¹¶æœç´¢
				</button>

				<!-- ç»“æœåŒºåŸŸ -->
				<div id="resultsContainer" class="hidden mt-8">
					<!-- æ–‡ä»¶æœç´¢ç»“æœ -->
					<div class="mb-6">
						<h3
							class="text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2"
						>
							<span>ğŸ“„</span>
							<span>æ–‡ä»¶æœç´¢ç»“æœ</span>
						</h3>
						<div
							id="fileAnswer"
							class="bg-gray-50 rounded-lg p-4 min-h-[100px] border border-gray-200"
						>
							<div class="flex items-center justify-center gap-2 text-gray-500">
								<div class="loading-spinner"></div>
								<span>ç­‰å¾…æŸ¥è¯¢...</span>
							</div>
						</div>
					</div>

					<!-- ç½‘ç»œæœç´¢ç»“æœ -->
					<div class="mb-6">
						<h3
							class="text-lg font-semibold text-gray-900 mb-3 flex items-center gap-2"
						>
							<span>ğŸŒ</span>
							<span>ç½‘ç»œæœç´¢ç»“æœ</span>
						</h3>
						<div
							id="webAnswer"
							class="bg-gray-50 rounded-lg p-4 min-h-[100px] border border-gray-200"
						>
							<div class="flex items-center justify-center gap-2 text-gray-500">
								<div class="loading-spinner"></div>
								<span>ç­‰å¾…æŸ¥è¯¢...</span>
							</div>
						</div>
					</div>

					<!-- Token ä½¿ç”¨ç»Ÿè®¡ -->
					<div
						id="usageStats"
						class="bg-blue-50 rounded-lg p-4 border border-blue-200"
					>
						<h4 class="font-semibold text-blue-900 mb-2">ğŸ“Š Tokenä½¿ç”¨ç»Ÿè®¡</h4>
						<div class="grid grid-cols-1 sm:grid-cols-3 gap-2 text-sm">
							<div>
								<span class="text-blue-800">è¾“å…¥:</span>
								<span id="inputTokens" class="font-mono text-blue-900">-</span>
							</div>
							<div>
								<span class="text-blue-800">è¾“å‡º:</span>
								<span id="outputTokens" class="font-mono text-blue-900">-</span>
							</div>
							<div>
								<span class="text-blue-800">æˆæœ¬:</span>
								<span id="estimatedCost" class="font-mono text-blue-900"
									>-</span
								>
							</div>
						</div>
					</div>
				</div>

				<!-- å¯¹è¯å†å² -->
				<div id="historyContainer" class="hidden mt-8">
					<div class="flex items-center justify-between mb-4">
						<h3 class="text-lg font-semibold text-gray-900">å¯¹è¯å†å²</h3>
						<button
							id="clearHistoryBtn"
							class="text-sm text-red-600 hover:text-red-800 font-medium"
						>
							æ¸…é™¤å†å²
						</button>
					</div>
					<div
						id="historyList"
						class="bg-gray-50 rounded-lg p-4 max-h-[400px] overflow-y-auto border border-gray-200"
					>
						<p class="text-gray-500 text-center text-sm">æš‚æ— å¯¹è¯å†å²</p>
					</div>
				</div>
			</div>
		</main>

		<!-- åŠ è½½é®ç½© -->
		<div
			id="loadingOverlay"
			class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"
		>
			<div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
				<div class="flex items-center gap-4">
					<div class="loading-spinner w-8 h-8"></div>
					<div>
						<p class="font-semibold text-gray-900">å¤„ç†ä¸­...</p>
						<p class="text-sm text-gray-600" id="loadingText">è¯·ç¨å€™</p>
					</div>
				</div>
			</div>
		</div>

		<!-- é¡µè„š -->
		<footer class="bg-white border-t border-gray-200 mt-12">
			<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
				<p class="text-center text-gray-600 text-sm">
					FÃ¶rsÃ¤kringskassan AIåŠ©æ‰‹ - ä½¿ç”¨ OpenAI gpt-4o-mini (æœ€ä¾¿å®œçš„æ¨¡å‹)
				</p>
			</div>
		</footer>

		<script src="/js/app.js"></script>
	</body>
</html>
